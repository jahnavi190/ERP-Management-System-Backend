package com.example.ERP_MANAGEMENT.service;

import com.example.ERP_MANAGEMENT.Repository.AdminRepository;
import com.example.ERP_MANAGEMENT.models.Admin;
import java.util.List;
import java.util.Optional;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class AdminService {
   @Autowired
   private AdminRepository adminRepository;

   public AdminService() {
   }

   public Admin addAdmin(Admin admin) {
      return (Admin)this.adminRepository.save(admin);
   }

   public Admin getAdminByUsername(String username) {
      return this.adminRepository.findByUsername(username);
   }

   public List<Admin> getAllAdmins() {
      return this.adminRepository.findAll();
   }

   public Optional<Admin> getAdminById(Long id) {
      return this.adminRepository.findById(id);
   }

   public Admin updateAdmin(Long id, Admin updatedAdmin) {
      return (Admin)this.adminRepository.findById(id).map((admin) -> {
         admin.setUsername(updatedAdmin.getUsername());
         admin.setAdminname(updatedAdmin.getAdminname());
         admin.setMobileNumber(updatedAdmin.getMobileNumber());
         admin.setMail(updatedAdmin.getMail());
         admin.setAddress(updatedAdmin.getAddress());
         admin.setPassword(updatedAdmin.getPassword());
         return (Admin)this.adminRepository.save(admin);
      }).orElseThrow(() -> {
         return new RuntimeException("Admin not found");
      });
   }

   public void deleteAdmin(Long id) {
      this.adminRepository.deleteById(id);
   }
}
